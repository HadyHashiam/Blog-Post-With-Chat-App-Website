<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>
        <%= pageTitle%> - Chat App
    </title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://netdna.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/main.css">

    <style type="text/css">
        body {
            background: #eee;
        }

        .social-wallpaper {
            position: relative;
            height: 300px;
            background: url(https://bootdey.com/img/Content/bg1.jpg) no-repeat;
            background-size: cover;
            background-color: #00b5ec;
        }

        .card.social-tabs {
            border-top: none;
        }

        .timeline-right .card,
        .timeline-left .card {
            border-top: none;
            box-shadow: 0 0 1px 2px rgba(0, 0, 0, 0.05), 0 -2px 1px -2px rgba(0, 0, 0, 0.04), 0 0 0 -1px rgba(0, 0, 0, 0.05);
            transition: all 180ms linear;
        }

        .timeline-right .card:hover,
        .timeline-left .card:hover {
            box-shadow: 0 0 25px -5px #9e9c9e;
            transition: all 180ms linear;
        }

        .timeline-icon {
            z-index: 1;
        }

        .tab-pane form .md-add-on i {
            font-size: 20px;
        }

        .wall-elips {
            position: absolute;
            right: 15px;
        }



        .social-profile {
            position: relative;
            padding-top: 15px;
        }

        .timeline-btn {
            position: absolute;
            bottom: 0;
            right: 30px;
        }

        .nav-tabs.md-tabs.tab-timeline li a {
            padding: 20px 0 10px;
            color: #666666;
            font-size: 18px;
        }

        .social-timeline-left {
            position: absolute;
            top: -200px;
        }

        .post-input {
            padding: 10px 10px 10px 5px;
            display: block;
            width: 100%;
            border: none;
            resize: none;
        }

        .user-box .media-object,
        .friend-box .media-object {
            height: 45px;
            width: 45px;
            display: inline-block;
        }

        .friend-box img {
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .user-box .media-left {
            position: relative;
        }

        .chat-header {
            color: #222222;
        }

        .live-status {
            height: 7px;
            width: 7px;
            position: absolute;
            bottom: 0;
            right: 17px;
            border-radius: 100%;
            border: 1px solid;
        }

        .tab-timeline .slide {
            bottom: -1px;
        }

        .image-upload input {
            visibility: hidden;
            max-width: 0;
            max-height: 0
        }

        .file-upload-lbl {
            max-width: 15px;
            padding: 5px 0 0;
        }

        .ellipsis::after {
            top: 15px;
            border: none;
            position: absolute;
            content: '\f142';
            font-family: FontAwesome;
        }

        .elipsis-box {
            box-shadow: 0 0 5px 1px rgba(0, 0, 0, 0.11);
            top: 40px;
            right: -10px;
        }

        .elipsis-box:after {
            content: '';
            height: 13px;
            width: 13px;
            background: #fff;
            position: absolute;
            top: -5px;
            right: 10px;
            -webkit-transform: rotate(45deg);
            -moz-transform: rotate(45deg);
            transform: rotate(45deg);
            box-shadow: -3px -3px 11px 1px rgba(170, 170, 170, 0.22);
        }

        .friend-elipsis {
            left: -10px;
            top: -10px;
        }

        .social-profile:hover .profile-hvr,
        .social-wallpaper:hover .profile-hvr {
            opacity: 1;
            transition: all ease-in-out 0.3s;
        }

        .profile-hvr {
            opacity: 0;
            position: absolute;
            text-align: center;
            width: 100%;
            font-size: 20px;
            padding: 10px;
            top: 0;
            color: #fff;
            background-color: rgba(0, 0, 0, 0.61);
            transition: all ease-in-out 0.3s;
        }

        .social-profile {
            margin: 0 15px;
        }

        .social-follower {
            text-align: center;
        }

        .social-follower h4 {
            font-size: 18px;
            margin-bottom: 10px;
            font-style: normal;
        }

        .social-follower h5 {
            font-size: 14px;
            font-weight: 300;
        }

        .social-follower .follower-counter {
            text-align: center;
            margin-top: 25px;
            margin-bottom: 25px;
            font-size: 13px;
        }

        .social-follower .follower-counter .txt-primary {
            font-size: 24px;
        }

        .timeline-icon {
            height: 45px;
            width: 45px;
            display: block;
            margin: 0 auto;
            border: 4px #fff solid;
        }

        .social-timelines-left:after {
            height: 3px;
            width: 25%;
            position: absolute;
            background: #cccccc;
            top: 20px;
            content: "";
            right: 0;
            z-index: 0;
        }

        .social-timelines:before {
            position: absolute;
            content: ' ';
            width: 3px;
            background: #cccccc;
            left: 4%;
            z-index: 0;
            height: 100%;
            top: 0;
        }

        .timeline-dot:after,
        .timeline-dot:before {
            content: "";
            position: absolute;
            height: 9px;
            width: 9px;
            background-color: #cccccc;
            left: 3.8%;
            border-radius: 100%;
        }

        .user-box .social-designation,
        .post-timelines .social-time {
            font-size: 13px;
        }

        .social-msg span {
            color: #666;
            padding-left: 10px;
            padding-right: 10px;
            margin-right: 10px;
        }

        .view-info .social-label,
        .contact-info .social-label,
        .work-info .social-label {
            font-size: 15px;
            padding-left: 0;
            padding-top: 0;
        }

        .view-info .social-user-name,
        .contact-info .social-user-name,
        .work-info .social-user-name {
            font-size: 14px;
            padding-left: 0;
        }

        .friend-elipsis .social-designation {
            font-size: 13px;
        }

        .social-client-description {
            padding-bottom: 20px;
        }

        .user-box .media-body {
            padding-top: 6px;
        }

        .timeline-details p {
            padding-top: 10px;
        }

        .timeline-details .chat-header,
        .post-timelines .chat-header {
            font-size: 15px;
        }

        .social-client-description {
            padding-bottom: 20px;
        }

        .social-client-description p {
            margin-top: 5px;
        }

        .social-client-description span {
            font-size: 12px;
            margin-left: 10px;
        }

        .social-client-description .chat-header {
            font-size: 13px;
        }

        .social-tabs a {
            font-size: 18px;
        }

        .timeline-btn a {
            margin-bottom: 20px;
        }

        .profile-hvr i {
            cursor: pointer;
        }

        .social-timelines:before {
            position: absolute;
            content: ' ';
            width: 3px;
            background: #cccccc;
            left: 4%;
            z-index: 0;
            height: 100%;
            top: 0;
        }

        .timeline-dot:after,
        .timeline-dot:before {
            content: "";
            position: absolute;
            height: 9px;
            width: 9px;
            background-color: #cccccc;
            left: 3.8%;
            border-radius: 100%;
        }

        ul#profile-lightgallery {
            display: inline-flex;
        }

        .social-timeline .btn i {
            margin-right: 0;
        }

        .card .card-block {
            padding: 25px;
        }

        .social-follower {
            text-align: center;
        }

        .media-left {
            padding-right: 20px;
        }

        .live-status {
            height: 9px;
            width: 9px;
            position: absolute;
            bottom: 0;
            right: 17px;
            border-radius: 100%;
            border: 1px solid;
            top: 5px;
        }

        .live-status {
            height: 10px;
            width: 10px;
            position: absolute;
            top: 20px;
            right: 20px;
            border-radius: 100%;
            border: 1px solid;
        }

        .bg-danger {
            background-color: #FF5370 !important;
            color: #fff;
        }

        .card {
            border-radius: 5px;
            -webkit-box-shadow: 0 1px 2.94px 0.06px rgba(4, 26, 55, 0.16);
            box-shadow: 0 1px 2.94px 0.06px rgba(4, 26, 55, 0.16);
            border: none;
            margin-bottom: 30px;
            -webkit-transition: all 0.3s ease-in-out;
            transition: all 0.3s ease-in-out;
        }

        .user-box .media-object,
        .friend-box .media-object {
            height: 45px;
            width: 45px;
            display: inline-block;
            cursor: pointer;
        }

        .md-tabs .nav-item {
            width: calc(100%/ 4);
            text-align: center;
        }

        .md-tabs .nav-item .nav-link.active~.slide {
            opacity: 1;
            -webkit-transition: all 0.3s ease-out;
            transition: all 0.3s ease-out;
        }

        .md-tabs .nav-item .nav-link~.slide {
            opacity: 0;
            -webkit-transition: all 0.3s ease-out;
            transition: all 0.3s ease-out;
        }

        .tab-timeline .slide {
            bottom: -1px;
        }

        .nav-tabs .slide {
            background: #4099ff;
            width: calc(100%/ 4);
            height: 4px;
            position: absolute;
            -webkit-transition: left 0.3s ease-out;
            transition: left 0.3s ease-out;
            bottom: 0;
        }
    </style>
</head>

<body>

    <%- include('parts/navbar')%>
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
        <div class="container">
            <div class="row">
                <div class="col-sm-12">
                    <div>
                        <div class="content social-timeline">
                            <div class>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="social-wallpaper">
                                            <div class="profile-hvr">
                                                <i class="icofont icofont-ui-edit p-r-10"></i>
                                                <i class="icofont icofont-ui-delete"></i>
                                            </div>
                                        </div>
                                        <% for (let friend of friends) { %>
                                            <div class="timeline-btn">
                                                <a href="#"
                                                    class="btn btn-primary waves-effect waves-light m-r-10">follows</a>
                                                <a href="/chat/<%= friend.chatId %>" class="btn btn-success">Chat</a>
                                            </div>
                                            <% } %>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-xl-3 col-lg-4 col-md-4 col-xs-12">
                                        <div class="social-timeline-left">

                                            <div class="card">
                                                <div class="social-profile">
                                                    <img class="img-fluid width-100" src="/<%= userImage%>" alt>
                                                    <div class="profile-hvr m-t-15">
                                                        <i class="icofont icofont-ui-edit p-r-10"></i>
                                                        <i class="icofont icofont-ui-delete"></i>
                                                    </div>
                                                </div>
                                                <div class="card-block social-follower">
                                                    <h4>
                                                        <%=username%>
                                                    </h4>
                                                    <h5>Softwear Engineer</h5>

                                                    <div class>
                                                        <% if (!isOwner) { %>
                                                            <form method="POST" id="friends-form">
                                                                <input id="myId" type="hidden" name="myId"
                                                                    value="<%= myId%>">
                                                                <input id="myName" type="hidden" name="myName"
                                                                    value="<%= myName%>">
                                                                <input id="myImage" type="hidden" name="myImage"
                                                                    value="<%= myImage%>">
                                                                <input id="friendId" type="hidden" name="friendId"
                                                                    value="<%= friendId%>">
                                                                <input id="friendName" type="hidden" name="friendName"
                                                                    value="<%= username%>">
                                                                <input id="friendImage" type="hidden" name="friendImage"
                                                                    value="<%= userImage%>">
                                                                <% if(isFriends) { %>
                                                                    <input type="submit" value="Delete Friend"
                                                                        class="btn btn-danger"
                                                                        formaction="/friend/delete">
                                                                    <% } else if (isRequestSent) { %>
                                                                        <input type="submit" value="Cancel Request"
                                                                            class="btn btn-danger"
                                                                            formaction="/friend/cancel">
                                                                        <% } else if (isRequestRecieved) { %>
                                                                            <input type="submit"
                                                                                value="Accept Friend Request"
                                                                                class="btn btn-success"
                                                                                formaction="/friend/accept">
                                                                            <input type="submit" value="Reject"
                                                                                class="btn btn-danger"
                                                                                formaction="/friend/reject">
                                                                            <% } else { %>
                                                                                <input id="addBtn" type="submit"
                                                                                    value="Add Friend"
                                                                                    class="btn btn-primary">
                                                                                <% } %>
                                                            </form>
                                                            <% } %>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="card">
                                                <div class="card-header">
                                                    <h5 class="card-header-text d-inline-block">Friends</h5>
                                                    <span class="label label-primary f-right"> See 12 More </span>
                                                </div>
                                                <div class="card-block friend-box">
                                                    <img class="media-object img-radius"
                                                        src="https://bootdey.com/img/Content/avatar/avatar1.png" alt
                                                        data-toggle="tooltip" data-placement="top" title
                                                        data-original-title="user image">
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-xl-9 col-lg-8 col-md-8 col-xs-12">
                                        <div class="card social-tabs">
                                            <ul class="nav nav-tabs md-tabs tab-timeline" role="tablist">
                                                <li class="nav-item">
                                                    <a class="nav-link active" data-toggle="tab" href="#timeline"
                                                        role="tab">Timeline</a>
                                                    <div class="slide"></div>
                                                </li>
                                                <!-- Other tabs omitted for brevity -->
                                            </ul>
                                        </div>
                                        <div class="tab-content">
                                            <div class="tab-pane active" id="timeline">
                                                <div class="row">
                                                    <% posts.forEach(post=> { %>
                                                        <div class="col-md-12 timeline-dot">
                                                            <div class="social-timelines p-relative">
                                                                <div class="row timeline-right p-t-35">
                                                                    <div class="col-2 col-sm-2 col-xl-1">
                                                                        <div class="social-timelines-left">
                                                                            <img class="img-radius timeline-icon"
                                                                                src="/<%= post.userId.image %>"
                                                                                alt="user image">
                                                                        </div>
                                                                    </div>
                                                                    <div
                                                                        class="col-10 col-sm-10 col-xl-11 p-l-5 p-b-35">
                                                                        <div class="card">
                                                                            <div class="card-block post-timelines">
                                                                                <div class="chat-header f-w-600">
                                                                                    <%= post.userId.username %>
                                                                                        <!-- Assuming post.userId has a username field -->
                                                                                        posted on your timeline
                                                                                </div>
                                                                                <div class="social-time text-muted">
                                                                                    <%= post.timestamp %>
                                                                                </div>
                                                                            </div>

                                                                            <div class="card-block">
                                                                                <div class="timeline-details">
                                                                                    <p class="text-muted">
                                                                                        <%= post.content %>
                                                                                    </p>
                                                                                </div>
                                                                            </div>
                                                                            <div
                                                                                class="card-block b-b-theme b-t-theme social-msg">
                                                                                <a href="#"> <i
                                                                                        class="icofont icofont-heart-alt text-muted"></i><span
                                                                                        class="b-r-muted">Like
                                                                                        (20)</span></a>
                                                                                <a href="#"> <i
                                                                                        class="icofont icofont-comment text-muted"></i><span
                                                                                        class="b-r-muted">Comments
                                                                                        (25)</span></a>
                                                                                <a href="#"> <i
                                                                                        class="icofont icofont-share text-muted"></i><span>Share
                                                                                        (10)</span></a>
                                                                            </div>
                                                                            <!-- Additional UI for comments, if needed -->
                                                                            <div class="card-block user-box">
                                                                                <!-- Form to add comments or additional interactions -->
                                                                                <div class="media">
                                                                                    <a class="media-left" href="#">
                                                                                        <img class="media-object img-radius m-r-20"
                                                                                            src="https://bootdey.com/img/Content/avatar/avatar2.png"
                                                                                            alt="User Avatar">
                                                                                    </a>
                                                                                    <div
                                                                                        class="media-body b-b-muted social-client-description">
                                                                                        <div class="chat-header">About
                                                                                            Marta Williams<span
                                                                                                class="text-muted">Jane
                                                                                                10, 2015</span></div>
                                                                                        <p class="text-muted">lorem
                                                                                            ipsum dolor sit amet,
                                                                                            consectetur
                                                                                            adipisicing elit, sed do
                                                                                            eiusmod tempor incididunt ut
                                                                                            labore et
                                                                                            dolore magna aliqua.Lorem
                                                                                            ipsum dolor sit amet,
                                                                                            consectetur
                                                                                            adipisicing elit, sed do
                                                                                            eiusmod tempor incididunt ut
                                                                                            labore et
                                                                                            dolore magna aliqua.</p>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <% }); %>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>


                                <script src="/js/jquery.min.js"></script>
                                <script src="/js/popper.min.js"></script>
                                <script src="/js/bootstrap.min.js"></script>
                                <script data-cfasync="false"
                                    src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
                                <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
                                <script
                                    src="https://netdna.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js"></script>
                                <script type="text/javascript">
                                </script>
                                <script src="/socket.io/socket.io.js"></script>
                                <script src="/js/sockets/init.js"></script>
                                <% if (!isOwner && !isFriends && !isRequestSent && !isRequestRecieved) { %>
                                    <script src="/js/sockets/friend.js"></script>
                                    <% } %>

</body>

</html>